<!doctype html>

<html lang="en" data-bs-theme="dark">

    <head>
        
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        
        <link rel="icon" href="https://www.petfactory.se/favicons/favicon-32.png" sizes="32x32">

        
        
        
        <link rel="apple-touch-icon" href="https://www.petfactory.se/favicons/favicon-180.png" sizes="180x180">

        <link rel="stylesheet" href="https://www.petfactory.se/css/bootstrap.min.css">
        <script defer src="https://www.petfactory.se/js/bootstrap.bundle.min.js"></script>

        <link rel="stylesheet" href="https://www.petfactory.se/css/style.css">
        <link rel="stylesheet" href="https://www.petfactory.se/css/syntax.css">

        
        <title>Petfactory | UE5 - Python &amp; PySide2</title>
        <meta name="description" content="Petfactory | Design and Animation | UE5 - Python &amp; PySide2" />

    </head>

    <body>

      <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">

        <div class="container-fluid main-menu-wrap">

          <a class="home-icon" href="https://www.petfactory.se/">
            <svg xmlns="http://www.w3.org/2000/svg" fill="#e83e8c" width="18" height="18" viewBox="0 0 61.44 61.67"><path class="a" d="M1.28,45.25V56.6a6,6,0,0,0,6,6H18.64A27.07,27.07,0,0,1,8,55.93,25.6,25.6,0,0,1,1.28,45.25Z" transform="translate(-1.28 -1.17)"/><path class="a" d="M28,7.85a27.08,27.08,0,0,1,19.37,7.79L52,20.31,41.35,31,36.9,26.55A13.24,13.24,0,0,0,28,23a12.91,12.91,0,1,0,0,25.82,13.24,13.24,0,0,0,8.9-3.56L62.72,19.42V7.18a6,6,0,0,0-6-6H7.29a6.33,6.33,0,0,0-6,6.23V26.77A28.27,28.27,0,0,1,28,7.85Z" transform="translate(-1.28 -1.17)"/><path class="a" d="M47.36,56.6a27,27,0,0,1-10.24,6.23H56.49a6,6,0,0,0,6-6V41.46Z" transform="translate(-1.28 -1.17)"/></svg>
          </a>


          <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>


          <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbar2Labe">
            <div class="offcanvas-header">
              <h5 class="offcanvas-title" id="offcanvasNavbar2Labe"></h5>
              <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>

            <div class="offcanvas-body">

              <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">

                <li class="nav-item">
                  
                  <a class="nav-link" aria-current="page" href="https://www.petfactory.se/about">About</a>
                </li>

                <li class="nav-item">
                  <a class="nav-link" aria-current="page" href="https://www.petfactory.se/work">Work</a>
                </li>

                <li class="nav-item">
                  <a class="nav-link" href="https://www.petfactory.se/cv">CV</a>
                </li>

                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Notes
                  </a>
                  <ul class="dropdown-menu dropdown-menu-end">
                    <li><a class="dropdown-item" href="https://www.petfactory.se//tags/python-notes">Python</a></li>
                    <li><a class="dropdown-item" href="https://www.petfactory.se//tags/houdini-notes">Houdini</a></li>
                    <li><a class="dropdown-item" href="https://www.petfactory.se//tags/unreal-engine-notes">Unreal Engine</a></li>
                    <li><a class="dropdown-item" href="https://www.petfactory.se//tags/davinci-resolve-notes">DaVinci Resolve</a></li>
                    <li>
                      <hr class="dropdown-divider">
                    </li>
                    <li><a class="dropdown-item" href="https://www.petfactory.se/notes">All Notes</a></li>
                  </ul>
                </li>
              </ul>

            </div>

          </div>

        </div>

      </nav>

      
      

      <main id="content-main-wrap">

          

<div class="top-spacer"></div>

<div class="container">
  <div class="row">
    <div class="col-md-10 notes-wrap">
    	<h1 id="python-plugin">Python plugin</h1>
<p>Enable the plugins you wish to use. There might be more scripting modules under the scripting tab depending on what you have installed and what you wish to be able to modify with python.</p>
<ul>
<li>Edit &gt; Plugins &gt; Scripting &gt;
<ul>
<li>Editor Scripting Utilities</li>
<li>Python Editor Script Plugin</li>
<li>Sequencer Scripting</li>
<li>etc &hellip;</li>
</ul>
</li>
</ul>
<h2 id="developer-mode">Developer Mode</h2>
<p>The <em>developer mode</em> will enable extra warnings eg for deprecated code. It will also generate stub code for use to get auto completion for external IDEs. The stub file will be found here: <em>Your Project &gt; Intermediate &gt; PythonStub &gt; unreal.py</em>. The stub file is generated every time the editor starts and is generated with your exact set of available code, plugins etc. Note that the file is quite large, about 10 mb, so your might have to increase the parsing limit of your external IDE to get the auto-complete working.</p>
<ul>
<li>Edit &gt; Editor Preferences &gt; Plugins &gt; Python
<ul>
<li>Developer Mode : <strong>Enable</strong></li>
</ul>
</li>
</ul>
<p>You can also enable it on a project basis. <strong>Note!</strong> The tooltip of this setting informs us that &ldquo;Most of the time you want to enable <em>bDeveloperMode</em> in the Editor Preferences instead&rdquo;. But if you would like to enabled it on a project basis:</p>
<ul>
<li>Edit &gt; Project Settings &gt; Plugins &gt; Python
<ul>
<li>Developer Mode : <strong>Enable</strong></li>
<li><strong>Note!</strong> as stated above you probably want to enabled it with the editor prefes instead</li>
</ul>
</li>
</ul>
<h2 id="python-version">Python Version</h2>
<p>I am using Unreal 5.0 and it uses Python 3.9.7 by default. The path to the Python location is:</p>
<ul>
<li>C:\Program Files\Epic Games\UE_5.0\Engine\Binaries\ThirdParty\Python3\Win64</li>
</ul>
<p>You can not change the version of Python in a binary build (a build from the launcher). This is because the Python plugin needs to be recompiled. If you are using a source build, the simplest way of replacing the Pyhon version is to set an environment variable called &ldquo;UE_PYTHON_DIR&rdquo; and point that to the Python installation you wish to use. The downside to this is that it is not very portable since it ends up baking a path into your build to a local Python SDK. This means that if it were run on another system the user must have the same version of python in the same place. A better way to replace the Python version is to replace the Python version that are shipped with the engine. Theese are stored inside the Third Party directory and then rebuild. Because the location is inside the engine path it will be portable.</p>
<h2 id="output-log">Output Log</h2>
<ul>
<li><strong>Output Log</strong>
<ul>
<li><em>Window &gt; Output Log</em></li>
<li>With the bottom-left dropdown you can switch between:
<ul>
<li>CMD</li>
<li>Python</li>
<li>Python (REPL)</li>
</ul>
</li>
<li><em>Clear Log</em>
<ul>
<li>RMB click &gt; Clear Log</li>
</ul>
</li>
<li><em>Filters</em>
<ul>
<li>You can use the Filters dropdown on the top of the Output Log to disable warnings if you find them annoying. (Could be useful to have them on, but in certain situations it might improve the readability of the log)</li>
<li><em>Categories</em>
<ul>
<li>If you only want to log Python print statements
<ul>
<li>Filters &gt; Categories &gt; Show All<br>
To disable all</li>
<li>Then enable LogPython (that you find in the lower middle of the list)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="crashes">Crashes</h3>
<p>When scripting you will inevitably chrash the editor form time to time. When The chrash Reporter windows appears you can see a line that says &ldquo;Crash reports comprise diagnostics files (Click here to view directory) &hellip;&rdquo; click that link to open up the log for the chrased session. Can be really useful to sift through.</p>
<p><em>x:\Path\To\Unreal Projects\MyBlend\Saved\Crashes...</em></p>
<hr>
<h1 id="init-script">Init Script</h1>
<p>If the Editor detects a script file called init_unreal.py in any of the paths it is configured to use, it automatically runs that script immediately.</p>
<p>This is a good approach for situations where you are working on a Project or a Plugin and you know that everyone working with that content needs to run the same initialization code every time the Editor starts up. You could put your initialization code inside a script with this name, and put it into the Content/Python folder within that Project or Plugin.</p>
<p>When you use a relative path to run a Python script, or to import another script module using the import command in one of your scripts, the script that you run or import can be in any path that is listed in the sys.path variable of your Python environment.</p>
<p>To list the paths that unreal looks for python scripts we can run the following in the output log:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">.</span>join(sys<span style="color:#f92672">.</span>path))
</code></pre></div><ul>
<li><strong>init_unreal.py</strong>
<ul>
<li>If the Editor detects a script file called <em>init_unreal.py</em> in any of the paths it is configured to use it automatically runs that script immediately.</li>
</ul>
</li>
<li><strong>Add init file</strong>
<ul>
<li>Lets use <strong>C:/Users/user_name/Documents/UnrealEngine/Python</strong> as the directory where we will keep our init_unreal.py file.</li>
<li>If this dir does not exist, create it.</li>
<li>In this script we can add additional paths that we want to have in our sys.path, for instance site.packages for PySide2 etc</li>
<li>We can also create a menu on the main menu for our tools</li>
<li>it might look something like:</li>
</ul>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> unreal
<span style="color:#f92672">import</span> sys

sys<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>append(<span style="color:#e6db74">&#39;C:/path/to/pyside2/Lib/site-packages&#39;</span>)
sys<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>append(<span style="color:#e6db74">&#39;C:/your/custom/location/dev/unreal&#39;</span>)

<span style="color:#f92672">import</span> petfactory.menu
petfactory<span style="color:#f92672">.</span>menu<span style="color:#f92672">.</span>add_menu()

</code></pre></div><ul>
<li><strong>Project Settings</strong>
<ul>
<li>You can also specify <em>Startup Scripts</em> and <em>Additional Paths</em> that the engine will add to sys.path on a per project basis Project Settings &gt; Python &gt; Startup Scrpts etc</li>
</ul>
</li>
</ul>
<h2 id="environment-var">Environment var</h2>
<p>In a tool I am writing I wanted a reference to a project specific directory. I also wanted it present when I was developing outside of UE, so I decided to set a environment var and access the directory this way. To set the environment var in Unreal we can use the init_unreal.py script (Like said above UE will scan various places for a script with this name and run it, but in this case I created a directory called Python in my project dir and added the snippet below).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> os
<span style="color:#f92672">from</span> pathlib <span style="color:#f92672">import</span> Path
<span style="color:#f92672">import</span> unreal

your_dir <span style="color:#f92672">=</span> Path(unreal<span style="color:#f92672">.</span>Paths<span style="color:#f92672">.</span>game_user_developer_dir(), <span style="color:#e6db74">&#39;Your_dir_name&#39;</span>)
<span style="color:#66d9ef">if</span> your_dir<span style="color:#f92672">.</span>is_dir():
	os<span style="color:#f92672">.</span>environ[<span style="color:#e6db74">&#39;YOUR_VARIABLE_NAME&#39;</span>] <span style="color:#f92672">=</span> str(your_dir<span style="color:#f92672">.</span>resolve())
	unreal<span style="color:#f92672">.</span>log(<span style="color:#e6db74">&#39;Environ Variable &#34;YOUR_VARIABLE_NAME&#34; was set&#39;</span>)
<span style="color:#66d9ef">else</span>:
	unreal<span style="color:#f92672">.</span>log_warning(<span style="color:#e6db74">&#39;Environ Variable &#34;YOUR_VARIABLE_NAME&#34; not set!&#39;</span>)
</code></pre></div><p>I used <em>unreal.Paths.game_user_developer_dir</em> to get the <em>game user developer dir</em>, used this as the dir root and then appended a directory. If the dir is found I keep a ref to it using an env var.</p>
<h1 id="gotcha">Gotcha</h1>
<h2 id="console-variables">Console Variables</h2>
<ul>
<li><strong>Note!</strong>
<ul>
<li>To be able to use the function below the <em>Console Variables Editor</em> plugin needs to be loaded.</li>
<li>Console Variables Editor 
<a href="https://docs.unrealengine.com/5.0/en-US/PythonAPI/class/ConsoleVariablesEditorFunctionLibrary.html?highlight=consolevar#unreal.ConsoleVariablesEditorFunctionLibrary" target="_blank" rel="noopener">Docs</a></li>
</ul>
</li>
<li><strong>Set CVar</strong>
<ul>
<li>unreal.ConsoleVariablesEditorFunctionLibrary.set_console_variable_by_name_int(&lsquo;r.RayTracing.Reflections.MaxBounces&rsquo;, 3)</li>
<li>unreal.ConsoleVariablesEditorFunctionLibrary.set_console_variable_by_name_float(&lsquo;r.RayTracing.Reflections.MaxRoughness&rsquo;, .5)</li>
<li>etc &hellip;</li>
</ul>
</li>
<li><strong>Get CVar</strong>
<ul>
<li>unreal.ConsoleVariablesEditorFunctionLibrary.get_console_variable_string_value(&lsquo;r.RayTracing.Reflections.MaxBounces&rsquo;)</li>
<li>etc &hellip;</li>
</ul>
</li>
</ul>
<h2 id="properties">Properties</h2>
<ul>
<li><strong>Get/Set</strong>
<ul>
<li>You can read/write properties with get_editor_property/set_editor_property</li>
<li>In the python api docs under the section <em>Editor Properties</em> you can see available properties for the class</li>
</ul>
</li>
<li><strong>Which class has the property?</strong>
<ul>
<li>The properties that you see in the details panel (in the UI of the editor) is not always on the actor itself, but on a component of the actor, so you might have to look up the api docs on the component itself to find the proprties you want to get/set.</li>
</ul>
</li>
<li><strong>Find the &ldquo;API name&rdquo; of the UI Property</strong>
<ul>
<li>To find the property in the api docs that matches the property that you see in the UI, hover the mouse over the property and the first row will be the name of the propery in the docs.
<ul>
<li><em>Note</em> it will be snake cased and lower cased</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="editoractorsubsystem">EditorActorSubsystem</h2>
<ul>
<li><strong>EditorActorSubsystem</strong>
<ul>
<li>When using the &ldquo;EditorActorSubsystem&rdquo; class we need to call methods on an instance of the class</li>
<li>There are <em>2 ways</em> of creating an instance that of the subsystem that we can call our methods on
<ul>
<li>actor_subsystem = <em>unreal.get_editor_subsystem(unreal.EditorActorSubsystem)</em></li>
<li>actor_subsystem = <em>unreal.EditorActorSubsystem()</em>
<ul>
<li>Note the parenthesis meaning that we call it to get an instance</li>
</ul>
</li>
<li>actors = actor_subsystem.get_all_level_actors()</li>
</ul>
</li>
<li>I guess this is similar to the other subsystems&hellip;</li>
</ul>
</li>
<li><strong>EditorUtilityLibrary</strong>
<ul>
<li>unreal.EditorUtilityLibrary.get_selected_assets()<br>
<em>Note!</em> that get_selected_assets can be called as a static method of the unreal.EditorUtilityLibrary, but it can also be called on the instance of it like actor subsystem. Why it is designed like this is I do not know.</li>
</ul>
</li>
<li><strong>EditorAssetLibrary</strong>
<ul>
<li>unreal.EditorAssetLibrary.list_assets(directory_path)<br>
<em>Note!</em> that list_assets is also called as a static method, but can also be called as an instance method</li>
</ul>
</li>
</ul>
<h1 id="remote-execution">Remote Execution</h1>
<p>This is really interesting! This lets us control UE from lets say Houdini. Can be quite useful. I have just started to look into this, but here is a snippet to explore:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> sys
<span style="color:#f92672">import</span> pprint
sys<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>append(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;C:\Program Files\Epic Games\UE_5.3\Engine\Plugins\Experimental\PythonScriptPlugin\Content\Python&#39;</span>)
<span style="color:#f92672">import</span> remote_execution <span style="color:#f92672">as</span> remote

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">executeCommand</span>(command):
    remote_exec <span style="color:#f92672">=</span> remote<span style="color:#f92672">.</span>RemoteExecution()
    remote_exec<span style="color:#f92672">.</span>start()
    remote_exec<span style="color:#f92672">.</span>open_command_connection(remote_exec<span style="color:#f92672">.</span>remote_nodes)
    exec_mode <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;ExecuteFile&#39;</span> <span style="color:#75715e"># note this</span>
    <span style="color:#66d9ef">return</span> remote_exec<span style="color:#f92672">.</span>run_command(command, True, exec_mode<span style="color:#f92672">=</span>exec_mode)
    
cmd_str <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;&#39;
</span><span style="color:#e6db74">def test():
</span><span style="color:#e6db74">    actor_list = unreal.get_editor_subsystem(unreal.EditorActorSubsystem).get_selected_level_actors()
</span><span style="color:#e6db74">    for i, actor in enumerate(actor_list):
</span><span style="color:#e6db74">        label = actor.get_actor_label()
</span><span style="color:#e6db74">        x, y, z = i*100,0,i*100
</span><span style="color:#e6db74">        output = f</span><span style="color:#ae81ff">\&#39;</span><span style="color:#e6db74">{label} was moved to {x=}, {y=}, {z=}</span><span style="color:#ae81ff">\&#39;</span><span style="color:#e6db74">
</span><span style="color:#e6db74">        if z &lt; 300:
</span><span style="color:#e6db74">            unreal.log(output)
</span><span style="color:#e6db74">        else:
</span><span style="color:#e6db74">            unreal.log_warning(output)
</span><span style="color:#e6db74">        actor.set_actor_location(unreal.Vector(x, y, z), False, False)
</span><span style="color:#e6db74">        
</span><span style="color:#e6db74">test()
</span><span style="color:#e6db74">&#39;&#39;&#39;</span> 
result <span style="color:#f92672">=</span> executeCommand(cmd_str)    
pprint<span style="color:#f92672">.</span>pprint(result)
</code></pre></div><h1 id="snippets">Snippets</h1>
<h2 id="blueprint">Blueprint</h2>
<p><strong>Edit a variable or call function of CDO</strong></p>
<p>
<a href="https://docs.unrealengine.com/5.3/en-US/objects-in-unreal-engine/" target="_blank" rel="noopener">Unreal Objects Docs</a></p>
<p>The UCLASS macro gives the UObject a reference to a UCLASS that describes its Unreal-based type. Each UCLASS maintains one Object called the &lsquo;Class Default Object&rsquo;, or <strong>CDO</strong> for short. The CDO is essentially a default &lsquo;template&rsquo; Object, generated by the class constructor and unmodified thereafter. Both the UCLASS and the CDO can be retrieved for a given Object instance, though they should <em>generally be considered read-only</em>. The UCLASS for an Object instance can be accessed at any time using the GetClass() function.</p>
<p>We can set variables or call methods (that in turn set varaibles of the blueprint itself) of a CDO with the snippet below. (Make sure that the BP asset is selected in the content browser)
If we compile and save the blueprint the edits will persist. Might be useful might be bad&hellip;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">bp_asset <span style="color:#f92672">=</span> unreal<span style="color:#f92672">.</span>EditorUtilityLibrary<span style="color:#f92672">.</span>get_selected_assets()[<span style="color:#ae81ff">0</span>]
bp_class <span style="color:#f92672">=</span> unreal<span style="color:#f92672">.</span>load_object(None, bp_asset<span style="color:#f92672">.</span>generated_class()<span style="color:#f92672">.</span>get_path_name())
bp_cdo <span style="color:#f92672">=</span> unreal<span style="color:#f92672">.</span>get_default_object(bp_class)
bp_cdo<span style="color:#f92672">.</span>set_editor_property(<span style="color:#e6db74">&#39;MyVar&#39;</span>, <span style="color:#ae81ff">42</span>)
bp_cdo<span style="color:#f92672">.</span>call_method(<span style="color:#e6db74">&#34;MyFunc&#34;</span>, (<span style="color:#e6db74">&#39;hello You!&#39;</span>,))
</code></pre></div><p><strong>Set variable of BP instance</strong>
We can du this by using the standard set_editor_property method</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">bp_actor<span style="color:#f92672">.</span>set_editor_property(<span style="color:#e6db74">&#39;my_array&#39;</span>, [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>])
bp_actor<span style="color:#f92672">.</span>set_editor_property(<span style="color:#e6db74">&#39;my_int&#39;</span>, <span style="color:#ae81ff">42</span>)
</code></pre></div><hr>
<!-- ## Outliner -->
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_static_mesh_lod_data</span>():

	<span style="color:#75715e"># note to have generate lods for an asset we can open it up in the static mesh editor</span>
	<span style="color:#75715e"># and under LOD Settings set the LOD Group combobox to for instance &#34;Large Prop&#34;</span>
	<span style="color:#75715e"># to regenerate LODs based on the lod group &#34;preset&#34;</span>
	static_mesh_list <span style="color:#f92672">=</span> get_content_browser_asset_of_class(asset_path<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;/Game/Pet&#39;</span>, class_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;StaticMesh&#39;</span>)
	<span style="color:#66d9ef">for</span> static_mesh <span style="color:#f92672">in</span> static_mesh_list:

		static_mesh_name <span style="color:#f92672">=</span> static_mesh<span style="color:#f92672">.</span>get_name()
		static_mesh_tri_count_list <span style="color:#f92672">=</span> []
		num_lods <span style="color:#f92672">=</span> static_mesh<span style="color:#f92672">.</span>get_num_lods()

		<span style="color:#66d9ef">for</span> lod_index <span style="color:#f92672">in</span> range(num_lods):
			<span style="color:#75715e"># a section is if we have multiple unweleded elements in a mesh</span>
			num_sections <span style="color:#f92672">=</span> static_mesh<span style="color:#f92672">.</span>get_num_sections(lod_index)
			lod_tri_count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>

			<span style="color:#66d9ef">for</span> section_index <span style="color:#f92672">in</span> range(num_sections):
				section_data <span style="color:#f92672">=</span> unreal<span style="color:#f92672">.</span>ProceduralMeshLibrary<span style="color:#f92672">.</span>get_section_from_static_mesh(static_mesh, lod_index, section_index)
				<span style="color:#75715e"># the second element of array is triangles, that we then divide by 3 sine the verts are shared by the triangles</span>
				section_tri_count <span style="color:#f92672">=</span> len(section_data[<span style="color:#ae81ff">1</span>])<span style="color:#f92672">/</span><span style="color:#ae81ff">3</span>
				lod_tri_count <span style="color:#f92672">+=</span> section_tri_count

			static_mesh_tri_count_list<span style="color:#f92672">.</span>append(lod_tri_count)

		mesh_reduction_percent_list <span style="color:#f92672">=</span> [int((tri_count<span style="color:#f92672">/</span>static_mesh_tri_count_list[<span style="color:#ae81ff">0</span>])<span style="color:#f92672">*</span><span style="color:#ae81ff">100</span>) <span style="color:#66d9ef">for</span> tri_count <span style="color:#f92672">in</span> static_mesh_tri_count_list]
		<span style="color:#66d9ef">print</span>(f<span style="color:#e6db74">&#39; </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">{static_mesh_name} has:</span><span style="color:#ae81ff">\n\t</span><span style="color:#e6db74">{static_mesh_tri_count_list} triangles which is a reduction of</span><span style="color:#ae81ff">\n\t</span><span style="color:#e6db74">{mesh_reduction_percent_list} percent</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>)

</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_static_mesh_data</span>():
	
	static_mesh_list <span style="color:#f92672">=</span> get_content_browser_asset_of_class(asset_path<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;/Game/Pet&#39;</span>, class_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;StaticMesh&#39;</span>)
	<span style="color:#66d9ef">for</span> static_mesh <span style="color:#f92672">in</span> static_mesh_list:
		asset_import_data <span style="color:#f92672">=</span> static_mesh<span style="color:#f92672">.</span>get_editor_property(<span style="color:#e6db74">&#39;asset_import_data&#39;</span>)

		<span style="color:#75715e"># below is a list of the base classes of &#34;FbxStaticMeshImportData&#34;</span>
		<span style="color:#75715e"># unreal.FbxStaticMeshImportData</span>
		<span style="color:#75715e"># unreal.FbxMeshImportData</span>
		<span style="color:#75715e"># unreal.FbxAssetImportData</span>
		<span style="color:#75715e"># unreal.AssetImportData</span>
		<span style="color:#75715e"># unreal.Object</span>
		<span style="color:#75715e"># unreal._ObjectBase</span>
		<span style="color:#75715e"># unreal._WrapperBase</span>
		<span style="color:#75715e"># object (the python object class)</span>

		<span style="color:#75715e"># we will call the method &#34;extract_filenames&#34; of the base class unreal.AssetImportData</span>
		file_path <span style="color:#f92672">=</span> asset_import_data<span style="color:#f92672">.</span>extract_filenames()
		<span style="color:#66d9ef">print</span>(file_path)

</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_content_browser_asset_of_class</span>(asset_path, class_name):

	asset_path_list <span style="color:#f92672">=</span> unreal<span style="color:#f92672">.</span>EditorAssetLibrary<span style="color:#f92672">.</span>list_assets(asset_path)
	asset_list <span style="color:#f92672">=</span> []
	<span style="color:#66d9ef">for</span> asset_path <span style="color:#f92672">in</span> asset_path_list:
		asset_data <span style="color:#f92672">=</span> unreal<span style="color:#f92672">.</span>EditorAssetLibrary<span style="color:#f92672">.</span>find_asset_data(asset_path)
		<span style="color:#75715e"># asset_name = asset_data.asset_name</span>
		asset_class_name <span style="color:#f92672">=</span> asset_data<span style="color:#f92672">.</span>asset_class
		asset <span style="color:#f92672">=</span> asset_data<span style="color:#f92672">.</span>get_asset()
		<span style="color:#66d9ef">if</span> asset_class_name <span style="color:#f92672">==</span> class_name:
			asset_list<span style="color:#f92672">.</span>append(asset)

	<span style="color:#66d9ef">return</span> asset_list
		
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_all_actors</span>():
	actor_subsystem <span style="color:#f92672">=</span> unreal<span style="color:#f92672">.</span>get_editor_subsystem(unreal<span style="color:#f92672">.</span>EditorActorSubsystem)
	<span style="color:#66d9ef">return</span> actor_subsystem<span style="color:#f92672">.</span>get_all_level_actors()

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_content_browser_selection</span>():
	<span style="color:#e6db74">&#39;&#39;&#39;Note! does not include folders&#39;&#39;&#39;</span>
	<span style="color:#66d9ef">return</span> unreal<span style="color:#f92672">.</span>EditorUtilityLibrary<span style="color:#f92672">.</span>get_selected_assets()

</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">package_path <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>package_path_le<span style="color:#f92672">.</span>text()
sequence_name <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>sequence_name_le<span style="color:#f92672">.</span>text()
asset_path <span style="color:#f92672">=</span> f<span style="color:#e6db74">&#39;{package_path}/{sequence_name}&#39;</span>

asset_data <span style="color:#f92672">=</span> unreal<span style="color:#f92672">.</span>EditorAssetLibrary<span style="color:#f92672">.</span>find_asset_data(asset_path)

</code></pre></div><h1 id="pyside2">PySide2</h1>
<p>If you look inside the python install dir you can se pip there. I read somewhere that you can just use pip to install PySide2 in the python dir that comes with unreal. I have not tried that yet. Instead I just created a virtual env elsewhere, installed Pyside2 in that env and pointed unreal to the site-packages of that install. See this post to 
<a href="https://www.petfactory.se/notes/pyside2/"> setup a virtual environment</a></p>
<ul>
<li>Add site-pacakges dir
<ul>
<li>Project Settings &gt; Plugins &gt; Python &gt; Additional Paths: ../path/to/venv/Lib/site-packages</li>
<li>or use the init_unreal.py script to add it to sys</li>
</ul>
</li>
</ul>
<h2 id="example">Example</h2>
<p>Here is a small snippet of how to creater a widget that is parented to the main window.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> sys

<span style="color:#f92672">from</span> PySide2 <span style="color:#f92672">import</span> QtGui
<span style="color:#f92672">from</span> PySide2 <span style="color:#f92672">import</span> QtWidgets

<span style="color:#f92672">import</span> unreal

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestWidget</span>(QtWidgets<span style="color:#f92672">.</span>QWidget):
	<span style="color:#66d9ef">def</span> __init__(self, parent<span style="color:#f92672">=</span>None):
		super(TestWidget, self)<span style="color:#f92672">.</span>__init__(parent)

		vbox <span style="color:#f92672">=</span> QtWidgets<span style="color:#f92672">.</span>QVBoxLayout(self)
		btn <span style="color:#f92672">=</span> QtWidgets<span style="color:#f92672">.</span>QPushButton(<span style="color:#e6db74">&#39;Test&#39;</span>)
		btn<span style="color:#f92672">.</span>clicked<span style="color:#f92672">.</span>connect(self<span style="color:#f92672">.</span>btn_clicked)
		vbox<span style="color:#f92672">.</span>addWidget(btn)

	<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">btn_clicked</span>(self):
		<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;Clicked&#39;</span>)
		unreal<span style="color:#f92672">.</span>log(<span style="color:#e6db74">&#39;Clicked&#39;</span>)


app <span style="color:#f92672">=</span> None
<span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> QtWidgets<span style="color:#f92672">.</span>QApplication<span style="color:#f92672">.</span>instance():
	app <span style="color:#f92672">=</span> QtWidgets<span style="color:#f92672">.</span>QApplication(sys<span style="color:#f92672">.</span>argv)	

widget <span style="color:#f92672">=</span> TestWidget()
widget<span style="color:#f92672">.</span>show()
unreal<span style="color:#f92672">.</span>parent_external_window_to_slate(widget<span style="color:#f92672">.</span>winId())

</code></pre></div><p>Then we can execute the script:</p>
<ul>
<li>Tools &gt; Execute Python Script : Browse to the script location</li>
</ul>
<h2 id="qapplication-singleton">QApplication singleton</h2>
<p>As you see in the example above we use an if statement to see if an instance of the QApplication exists. If we try to create a qApp without this check we will get the following error:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#a6e22e">RuntimeError</span>: Please destroy the QApplication singleton before creating a new QApplication instance<span style="color:#f92672">.</span>
</code></pre></div><p>So this means we create a qApp if it does not exists else we use the &ldquo;current one&rdquo;. If we for some reason wants to shutdown the qApp we can use this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">qApp<span style="color:#f92672">.</span>shutdown()
</code></pre></div><h1 id="resources--docs">Resources &amp; Docs</h1>
<ul>
<li><strong>Epic</strong>
<ul>
<li><em>Docs</em>
<ul>
<li>
<a href="https://docs.unrealengine.com/en-US/PythonAPI/index.html" target="_blank" rel="noopener">Unreal 5.0 Python API Documentation</a></li>
<li>
<a href="https://docs.unrealengine.com/en-US/ProductionPipelines/ScriptingAndAutomation/Python/index.html" target="_blank" rel="noopener">Scripting the Editor using Python</a></li>
</ul>
</li>
<li><em>Video</em>
<ul>
<li>
<a href="https://www.youtube.com/watch?v=0guOMTiwmhk&amp;t=601s" target="_blank" rel="noopener">Python in Unreal Engine | Inside Unreal</a></li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>
    <div class="col-md-2 toc-wrap">
    	
    	<aside class="toc-aside">
    	
    	<div class="toc-content">
			<nav id="TableOfContents">
  <ul>
    <li><a href="#python-plugin">Python plugin</a>
      <ul>
        <li><a href="#developer-mode">Developer Mode</a></li>
        <li><a href="#python-version">Python Version</a></li>
        <li><a href="#output-log">Output Log</a>
          <ul>
            <li><a href="#crashes">Crashes</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#init-script">Init Script</a>
      <ul>
        <li><a href="#environment-var">Environment var</a></li>
      </ul>
    </li>
    <li><a href="#gotcha">Gotcha</a>
      <ul>
        <li><a href="#console-variables">Console Variables</a></li>
        <li><a href="#properties">Properties</a></li>
        <li><a href="#editoractorsubsystem">EditorActorSubsystem</a></li>
      </ul>
    </li>
    <li><a href="#remote-execution">Remote Execution</a></li>
    <li><a href="#snippets">Snippets</a>
      <ul>
        <li><a href="#blueprint">Blueprint</a></li>
      </ul>
    </li>
    <li><a href="#pyside2">PySide2</a>
      <ul>
        <li><a href="#example">Example</a></li>
        <li><a href="#qapplication-singleton">QApplication singleton</a></li>
      </ul>
    </li>
    <li><a href="#resources--docs">Resources &amp; Docs</a></li>
  </ul>
</nav>	
		</div>
		</aside>	
    </div>
  </div>
</div>


<div class="mobile-toc-wrap">

	<div class="mobile-toc-btn">
		<button class="btn" hret="unreal" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">
			<svg fill="#888" width="26" height="26" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1z"/>
  <path d="M8 4a.5.5 0 0 1 .5.5V6H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V7H6a.5.5 0 0 1 0-1h1.5V4.5A.5.5 0 0 1 8 4"/></svg>








		</button>
	</div>
	
	<div class="offcanvas offcanvas-end" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
	  <div class="offcanvas-header">
	    <h5 class="offcanvas-title" id="offcanvasRightLabel"></h5>
	    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
	  </div>
	  
	  <div class="offcanvas-body" id="toc-modal-wrap">
	  	<div data-bs-dismiss="offcanvas">
	    	<nav id="TableOfContents">
  <ul>
    <li><a href="#python-plugin">Python plugin</a>
      <ul>
        <li><a href="#developer-mode">Developer Mode</a></li>
        <li><a href="#python-version">Python Version</a></li>
        <li><a href="#output-log">Output Log</a>
          <ul>
            <li><a href="#crashes">Crashes</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#init-script">Init Script</a>
      <ul>
        <li><a href="#environment-var">Environment var</a></li>
      </ul>
    </li>
    <li><a href="#gotcha">Gotcha</a>
      <ul>
        <li><a href="#console-variables">Console Variables</a></li>
        <li><a href="#properties">Properties</a></li>
        <li><a href="#editoractorsubsystem">EditorActorSubsystem</a></li>
      </ul>
    </li>
    <li><a href="#remote-execution">Remote Execution</a></li>
    <li><a href="#snippets">Snippets</a>
      <ul>
        <li><a href="#blueprint">Blueprint</a></li>
      </ul>
    </li>
    <li><a href="#pyside2">PySide2</a>
      <ul>
        <li><a href="#example">Example</a></li>
        <li><a href="#qapplication-singleton">QApplication singleton</a></li>
      </ul>
    </li>
    <li><a href="#resources--docs">Resources &amp; Docs</a></li>
  </ul>
</nav>
	    </div>	
	  </div>
	</div>

</div>



      </main>

      
      


      

      <footer class="container py-5">

          <div class="row">

              <div class="col-md-6 footer-logo-wrap">

                  <a class="home-icon" href="https://www.petfactory.se/">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="#e83e8c" width="18" height="18" viewBox="0 0 61.44 61.67"><path class="a" d="M1.28,45.25V56.6a6,6,0,0,0,6,6H18.64A27.07,27.07,0,0,1,8,55.93,25.6,25.6,0,0,1,1.28,45.25Z" transform="translate(-1.28 -1.17)"/><path class="a" d="M28,7.85a27.08,27.08,0,0,1,19.37,7.79L52,20.31,41.35,31,36.9,26.55A13.24,13.24,0,0,0,28,23a12.91,12.91,0,1,0,0,25.82,13.24,13.24,0,0,0,8.9-3.56L62.72,19.42V7.18a6,6,0,0,0-6-6H7.29a6.33,6.33,0,0,0-6,6.23V26.77A28.27,28.27,0,0,1,28,7.85Z" transform="translate(-1.28 -1.17)"/><path class="a" d="M47.36,56.6a27,27,0,0,1-10.24,6.23H56.49a6,6,0,0,0,6-6V41.46Z" transform="translate(-1.28 -1.17)"/></svg>
                  </a>
                  <span class="footer-logo-lext">petfactory &copy; 2024</span>

              </div>

              <div class="col-md-6 social-list">
                  <ul>
                      <li><a target="_blank" class="" href="https://twitter.com/johanBorgstrom"><svg fill="#444" width="20" height="20" viewBox="0 0 16 16"><path d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</a></li>
                      <li><a target="_blank" class="" href="https://www.youtube.com/channel/UCB-6-mQgbIn2dUa70D1noTQ"><svg fill="#444" width="20" height="20" viewBox="0 0 64 64"><path d="M54.15,10.031l-20.9-0.019l-21.718,0.019c-5.433,0-11.534,3.626-11.534,8.944v26.474c0,5.316,6.101,8.559,11.534,8.559 H54.15c5.432,0,9.834-3.242,9.834-8.559V18.976C63.984,13.657,59.582,10.031,54.15,10.031z M27.856,42.205L27.73,22.044 l14.03,10.168L27.856,42.205z"/></svg>




</a></li>
                      
                      <li><a target="_blank" class="" href="https://linkedin.com/in/johan-borgstr%c3%b6m-8b06875"><svg fill="#444" width="20" height="20" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M13.632 13.635h-2.37V9.922c0-.886-.018-2.025-1.234-2.025-1.235 0-1.424.964-1.424 1.96v3.778h-2.37V6H8.51V7.04h.03c.318-.6 1.092-1.233 2.247-1.233 2.4 0 2.845 1.58 2.845 3.637v4.188zM3.558 4.955c-.762 0-1.376-.617-1.376-1.377 0-.758.614-1.375 1.376-1.375.76 0 1.376.617 1.376 1.375 0 .76-.617 1.377-1.376 1.377zm1.188 8.68H2.37V6h2.376v7.635zM14.816 0H1.18C.528 0 0 .516 0 1.153v13.694C0 15.484.528 16 1.18 16h13.635c.652 0 1.185-.516 1.185-1.153V1.153C16 .516 15.467 0 14.815 0z" fill-rule="nonzero"/></svg></a></li>
                  </ul>
              </div>
          </div>
          
      </footer>

    </body>

</html>